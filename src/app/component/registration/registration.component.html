<div class="container">
  <h1>Registration Form</h1>
  <div [hidden]="submitted">
  <form #registrationForm="ngForm">
    <div class="form-group">
      <label for="username">Username</label>
      <input type="text"  autofocus     name="username"
             required     maxlength="16" pattern="([0-9A-Za-z]{1,16})" 
             class="form-control" id="username"  autofocus
             required [(ngModel)]="user.username"  #username="ngModel" >
      <div [hidden]="username.valid || username.pristine"
             class="alert alert-danger">
            Username is invalid
        </div>
    </div>

    <!-- PASSWORD FORM FIELD-->
    <div class="form-group">
      <label for="password">Password</label>
      <input type="password"  id="password" required name="password"
             class="form-control"  minlength="8" maxlength="24"
             pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\s).*$" 
             [(ngModel)]="user.password" #password="ngModel" >
             <div [hidden]="password.valid || password.pristine"
             class="alert alert-danger">
            Password is invalid
            Please include at least 1 uppercase character, 1 lowercase character, and 1 number
            Please make sure your password is at least 8 characters in length
            </div>  
    </div>

    <!-- PASSWORD CONFIRMATION FORM FIELD-->
    <div class="form-group">
      <label for="password">Confirm Password</label>
      <input type="password"  id="passwordC" required name="passwordC"
             class="form-control"   
             [(ngModel)]="confirmPassword" #passwordC="ngModel" >
    </div>

    <div class="form-group">
      <label for="firstname">First Name</label>
      <input type="text" required pattern="([A-Za-z.-']{1,40})" class="form-control" id="firstname" [(ngModel)]="user.firstname" name="firstname" #firstname="ngModel" maxlength="16">
      <div [hidden]="firstname.valid || firstname.pristine"
             class="alert alert-danger">
            First name is invalid
        </div>
    </div>

    <div class="form-group">
      <label for="lastname">Last Name</label>
      <input type="text" required pattern="([A-Za-z.'-]{1,40})" class="form-control" id="lastname" [(ngModel)]="user.lastname" name="lastname" #lastname="ngModel" maxlength="16">
      <div [hidden]="lastname.valid || lastname.pristine"
             class="alert alert-danger">
            Last name is invalid
        </div>
    </div>

    <div class="form-group">
      <label for="alterEgo">Email</label>
      <input type="email" id="email" name="email"
             required     pattern="^([a-zA-Z0-9._])+([@]){1}([a-zA-Z])+([.]){1}([a-zA-Z])+$"
             class="form-control"  [(ngModel)]="user.email"  #email="ngModel">
      <div   [hidden]="email.valid || email.pristine" 
             class="alert alert-danger">
            Email is invalid
        </div>
    </div>

    <div class="form-group">
      <label for="recoveryQuestion">Recovery Question</label>
      <select class="form-control" id="recoveryQuestion" required [(ngModel)]="user.recoveryQuestion" name="recoveryQuestion" #recoveryQuestion="ngModel">
        <option *ngFor="let ques of questions" required [value]="ques">{{ques}}</option>
      </select>
    </div>

    <div class="form-group">
      <label for="recoveryAnswer">Recovery Answer</label>
      <input type="text" required pattern="([0-9A-Za-z.]{1,20})"class="form-control" id="recoveryAnswer" [(ngModel)]="user.recoveryAnswer" name="recoveryAnswer" #recoveryAnswer="ngModel" maxlength="20">
      <div [hidden]="recoveryAnswer.valid || recoveryAnswer.pristine"
             class="alert alert-danger">
             recoveryAnswer is required
        </div>
    </div>

    <button type="button" [disabled]="!registrationForm.form.valid" class="btn btn-dark" (click)="addUser()">Register</button>

  </form>
  </div>
  
  <!-- 
    Alert the user of either a successful or unsuccessful registration
  -->
  <div [hidden]="!submitted">
    <p><span class="badge badge-light">Registration {{registrationStatus}}</span></p>
    <p>{{registrationString}}<span class="badge badge-light"></span></p>
  
    <div class="btn-group btn-group-sm" >
          <button type="button" (click)="openForm()" class="btn btn-dark" data-dismiss="modal">OK</button>
    </div>
  </div>


</div>